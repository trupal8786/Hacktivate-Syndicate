"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="afc50fdf-415a-5065-a499-6bcefbd500b9")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([["1904"],{108281(e,t,n){n.d(t,{Fb:()=>o,Xr:()=>i,qN:()=>s});let i="emoji_picker--emojiPickerContainerCommentsNext--aj-sb emoji_picker--emojiPickerContainer---7xd0",o="emoji_picker--emojiPicker--px4ES",s="emoji_picker--pointingDropdown--d7B0L"},682950(e,t,n){n.d(t,{Gm:()=>c,MP:()=>p,OX:()=>r,Sg:()=>s,U0:()=>o,bQ:()=>m,fP:()=>i,i8:()=>h,mr:()=>a,o1:()=>u,q9:()=>l,xu:()=>d});let i="thread_comment_composer--inputSectionWrapper--Ljawz",o="thread_comment_composer--newComment--R75Qp",s="thread_comment_composer--composerEmpty--7FvFP",a="thread_comment_composer--highlighted--9KpSD",r="thread_comment_composer--editableTypeahead--xl-hc text--fontPos13--5OfL8 text--_fontBase--VaHfk",d="thread_comment_composer--leftComposerButtonGroup--pxBu1",l="thread_comment_composer--editSubmitButtons--yHj82",p="thread_comment_composer--replyComposerContainer--g-PV6",h="thread_comment_composer--replyAuthorElement--l9Luu",m="thread_comment_composer--errorFallback---4SVz text--fontPos13--5OfL8 text--_fontBase--VaHfk thread_comment_composer--inputSectionWrapper--Ljawz",c="thread_comment_composer--errorFallbackNewComment--tk687 thread_comment_composer--errorFallback---4SVz text--fontPos13--5OfL8 text--_fontBase--VaHfk thread_comment_composer--inputSectionWrapper--Ljawz thread_comment_composer--newComment--R75Qp",u="thread_comment_composer--actions--EnUlh"},694416(e,t,n){n.d(t,{I2:()=>a,K9:()=>r,Pg:()=>p,cC:()=>l,jn:()=>s,mS:()=>o,oQ:()=>i,xN:()=>d});let i="emoji_typeahead--emojiTypeahead--HP8be",o="emoji_typeahead--commentsEmojiTypeaheadDown--m3nMR",s="emoji_typeahead--commentsEmojiTypeaheadUp--nbtWh",a="emoji_typeahead--emojiTypeaheadRow--M3h8B",r="emoji_typeahead--figJamEditorEmojiTypeaheadRowSelected--QZEKW",d="emoji_typeahead--emojiTypeaheadRowSelected--SfRzd",l="emoji_typeahead--emojiName--cgkpN",p="emoji_typeahead--emojiPreview--xpTOT"},73175(e,t,n){n.d(t,{q:()=>R});var i=n(239976),o=n(105652),s=n(645186),a=n(850159),r=n(741542),d=n(573598),l=n(354991),p=n(705828),h=n(746062),m=n(613629),c=n(596690),u=n(985373),_=n(803978),y=n(38900),x=n(936652),g=n(290589),f=n(587619),w=n(999682),v=n(865955),T=n(328151);function C(e){let{inputRef:t,text:n}=e,[s,r]=o.useState(!1);return(0,v.O1)(e.onEscape,v.KD.LINK_TOOLTIP),(0,i.jsx)("div",{className:"alt_text_editor--container--G9Yqj hyperlink_editor--container--7yKaR",style:{left:e.location.x,top:e.location.y},children:(0,i.jsx)("div",{className:`alt_text_editor--popup--ovlOI hyperlink_editor--popup--8M5kY _overlayBase--_overlayBase--VoHJ7 ${w.Dm}`,children:e.canEdit&&(s||""===n)?(0,i.jsx)("input",{className:"alt_text_editor--input--pMzP0 hyperlink_editor--input--hRIzs input--darkInput--bPXl6",defaultValue:n,onKeyDown:t=>{"Enter"===t.key&&(e.onEnter(),t.preventDefault())},placeholder:(0,a.t)("comments.add_description"),autoComplete:"off",autoCapitalize:"off",ref:t,autoFocus:!0}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"alt_text_editor--textContainer--o2Ygz",children:(0,i.jsxs)("div",{className:e.canEdit?"alt_text_editor--text--kmU7b":"alt_text_editor--extendedText--zq6ak alt_text_editor--text--kmU7b",children:[(0,i.jsx)("span",{className:"alt_text_editor--label--yHPK9",children:(0,a.t)("comments.alt_text_label")}),n]})}),e.canEdit&&(0,i.jsx)("button",{className:"alt_text_editor--button--Yye-m",onClick:()=>r(!0),autoFocus:!0,children:(0,a.t)("comments.edit_alt_text")})]})})})}var k=n(754305),P=n(215453),j=n(434793);let D={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"},R=(0,x.Ju)(function(e){let t=(0,s.wA)(),[n,x]=o.useState(e.selectedIdx),R=o.useRef(null),[N,b]=o.useState(null),M=o.useRef(null),{onUpdateAltText:E}=e,[I,A]=o.useState(e.attachments),S=(0,g.UR)(f.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),U=S?(0,d.H0)(S):void 0,O=e=>{if(R.current){let e=R.current?.children[n].firstChild;e?.blur()}x(e),b(null)},W=e=>{O((n+e+I.length)%I.length)},z=e=>{let t=n===(-1===e?0:I.length-1);return(0,i.jsx)(c.$,{onClick:()=>W(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:t})},F=()=>(t(y.Lo()),!0);(0,v.O1)(F,v.KD.FULL_SCREEN_MODAL);let H=(e,n)=>{e.preventDefault(),e.stopPropagation(),t(u.j7({type:w.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},L=o.useRef(null),B=o.useCallback(()=>{if(M.current&&!N){let e=M.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);t(_.jD()),b(n)}else b(null)},[t,N]),K=o.useCallback(e=>{if(L.current){let i=L.current.value.trim();(i||e)&&E(i,n).then(e=>{e&&(200!==e.status?t(m.F.enqueue({message:(0,a.t)("comments.failed_to_update_alt_text")})):A(e=>(e[n]={...e[n],altText:i},e)))}).catch(e=>{t(m.F.enqueue({message:(0,a.t)("comments.failed_to_update_alt_text")}))})}b(null)},[t,E,n]);return(0,i.jsxs)(h.i,{displayAs:h.C.Block,children:[(0,i.jsx)(k.d_,{className:"attachment_detail_modal--attachmentDetailsModal--Eot1h",size:"any",onKeyDown:e=>{(e=>{if("ArrowLeft"===e.key)0!==n&&W(-1);else if("ArrowRight"===e.key){if(n===I.length-1)return;W(1)}})(e)},children:(0,i.jsxs)("div",{className:"attachment_detail_modal--contentSectionContainer--DG-qz",children:[(0,i.jsxs)("div",{className:"attachment_detail_modal--headerContainer--KyDsG",children:[(0,i.jsx)("div",{className:"attachment_detail_modal--headerTitle--3JuMB",children:I[n].metadata.file_name??(0,a.t)("comments.attachment_default_name",{fileExtension:I[n].mediaType.split("/")[1]})}),(0,i.jsx)(p.Jn,{className:"attachment_detail_modal--headerCloseButton--Wd7U9",recordingKey:"commentMediaDetailModal",onClick:F,innerText:(0,a.t)("comments.close"),"aria-label":(0,a.t)("comments.close")})]}),(0,i.jsxs)("div",{className:"attachment_detail_modal--selectedContent--uGWkD",children:[(0,i.jsx)(P.DH,{imageSrc:I[n].imageUrl,onContextMenu:e=>{H(e,I[n])},pageBackgroundColor:U??void 0,...D}),!!(0,r.getFeatureFlags)().comments_media_alt_text&&(e.canEdit||I[n].altText)&&(0,i.jsx)("button",{className:I.length>1?"attachment_detail_modal--altTextAboveThumbnails--OA3fq attachment_detail_modal--altText--WjeOT feed_post_detail_modal--contentOverlayPill--5a5qA":"attachment_detail_modal--altText--WjeOT feed_post_detail_modal--contentOverlayPill--5a5qA","data-tooltip-type":T.Ib.TEXT,"data-tooltip":N?void 0:(0,a.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>N?K(I[n].altText):B(),ref:M,children:(0,a.t)("comments.alt_text")})]}),I.length>1&&(0,i.jsxs)("div",{className:"attachment_detail_modal--thumbnailSection--qV9e0",children:[z(-1),(0,i.jsx)("div",{ref:R,className:"attachment_detail_modal--thumbnailContainer--gwOE4",children:I.map((e,t)=>(0,i.jsx)("div",{className:"attachment_detail_modal--thumbnailWrapper--xcsSK",children:(0,i.jsx)(j.MH,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,a.t)("comments.attachment_thumbnail_alt_text_default"),ariaLabel:e.altText||(0,a.t)("comments.attachment_thumbnail_label_indexed",{attachmentIndex:t+1,attachmentCount:I.length}),isSelected:t===n,onClick:e=>{O(t)},onRightClick:t=>H(t,e)})},e.thumbnailUrl))}),z(1)]})]})}),N&&(0,i.jsx)(C,{text:I[n].altText??"",location:N,onEnter:()=>K(I[n].altText),onEscape:()=>(b(null),!0),inputRef:L,canEdit:e.canEdit})]})},"AttachmentDetailModal",x.ZU.NO)},587619(e,t,n){n.d(t,{b:()=>o});var i,o=2036!=n.j?((i=o||{}).DOCK_STYLE="DOCK_STYLE",i.ATTACHMENT_MODAL_BACKGROUND_COLOR="ATTACHMENT_MODAL_BACKGROUND_COLOR",i):null},211468(e,t,n){n.d(t,{H6:()=>A,WM:()=>b,_B:()=>R,hC:()=>N,nq:()=>I,uB:()=>E,zf:()=>M});var i=n(105652),o=n(645186),s=n(730351),a=n(37760),r=n(181645),d=n(429163),l=n(393667),p=n(967233),h=n(375872),m=n(520435),c=n(608317),u=n(860631),_=n(290133),y=n(46960),x=n(973162);if(2036!=n.j)var g=n(947234);var f=n(865876),w=n(27266),v=n(578880),T=n(786821),C=n(278035),k=n(598365),P=n(354621);function j(e){return!!e.commentPin}let D=2036!=n.j?{value:()=>{}}:null;function R(){let[{value:e},t]=i.useState(D),[{value:n},o]=i.useState(D),[s,a]=i.useState(!1),r=i.useCallback(e=>{t(e?{value:e}:D)},[t]),d=i.useCallback(e=>{o(e?{value:e}:D)},[o]);return i.useMemo(()=>({onInsert:n,onClear:e,isEditorFocused:s,setIsEditorFocused:a,editorOnClear:r,editorOnInsert:d}),[e,n,s,a,r,d])}function N(e,t,n){return null==e||"loaded"!==e.status?t:n?n(e.data):e.data}function b(e,t,n,a){let r=(0,y.s)(),d=(0,o.wA)(),c=(0,P.eY)(),u=(0,v.lg)(),_=(0,l.H)(),x=_&&"-1:-1"!==_,f=(0,h.hA)(),T=(0,w.$m)(),C=i.useMemo(()=>{let t,i=e=>e.filter(e=>{if(e.anchored&&e.comments.length>0&&e.comments[0].client_meta?.node_id){let t=e.comments[0].client_meta.node_id;return!!c.get(t)}return!0}),o=e=>e.filter(e=>{if(e.anchored&&e.comments.length>0&&e.comments[0].client_meta?.node_id){let t=e.comments[0].client_meta.node_id,n=t?(0,s.UN)().get(t):void 0,i=n?(0,l.s)(n,u):"-1:-1";return x?i===_:"-1:-1"!==i}return!0});switch(r.filterBy){case"hidden_sections":t=e=>e.filter(e=>{if(e.id!==n&&e.anchored&&e.comments.length>0&&e.comments[0].client_meta?.node_id){let t=e.comments[0].client_meta.node_id,n=c.get(t);return!n?.isUnderHiddenSection}return!0});break;case"deleted_anchors":t=i;break;case"non_focused_node_anchors":t=o;break;case"slide_filter_rules":t=e=>T&&x?o(i(e)):i(e);break;case"non_dev_mode_focus":t=e=>e.filter(e=>{if(e.anchored&&e.comments.length>0&&e.comments[0].client_meta?.node_id){let t=f?(0,s.UN)().get(f):null;if(!t)return!0;let n=e.comments[0].client_meta.node_id,i=n?(0,s.UN)().get(n):null;return(0,p.WJ)(t,i)}return!0})}return N(e,[],t)},[r.filterBy,e,n,c,x,_,f,T,u]),k=i.useRef(C);return k.current=C,i.useEffect(()=>{a&&!k.current.find(e=>e.id===n)&&n!==g.hm&&d(m.UU())},[d,n,a]),i.useMemo(()=>{var e,n;return e=C,n=t,e.filter(e=>!!e.canvasPosition&&e.page===n&&!e.isCanvasMention)},[C,t])}function M(e,t){let n=i.useMemo(()=>e.filter(e=>e.canvasPosition),[e]),o=i.useMemo(()=>{if(0!==n.length)return n.reduce((e,t)=>e.canvasPosition.y<t.canvasPosition.y?e:t)},[n]);return i.useMemo(()=>{var n;let i,s;return o?(n=o.canvasPosition,i=(0,k.Z0)(t,n).y,s=e=>Math.floor(((0,k.Z0)(t,e.canvasPosition).y-i)/50),e.sort((e,t)=>{if((0,T.U6)()){if(j(e)&&!j(t))return -1;else if(!j(e)&&j(t))return 1}let n=s(e),i=s(t);return n===i?e.canvasPosition.x-t.canvasPosition.x:n-i})):e},[e,o,t])}function E(e,t){let n=i.useContext(x.hh),s=i.useMemo(()=>N(n.threads,[]),[n.threads]),a=(0,o.d4)(e=>e.comments.newComment);return i.useMemo(()=>e===g.hm?(0,f.JG)(e,a,t):s.find(t=>t.id===e)||null,[a,e,s,t])}function I(e,t,n,s,a,r){let[d,l]=i.useState(!1);i.useEffect(()=>{e&&l(e===n)},[e,n]);let p=(0,o.wA)(),h=(0,_.I_)(),x=(0,y.s)(),g=(0,C.Z)("comments-navigate");return i.useEffect(()=>{if(t&&!d){let t=s.find(t=>t.id===e);if(t){if(r){if(!t.isPendingFromSinatra&&t.canvasPosition){let e=(0,k.Z0)(a.getViewportInfo(),t.canvasPosition),n=(0,u.c4)(t.comments).length,i=c.XC.getPinSize(n);r(t.id,{x:e.x,y:e.y,width:1.15*i.width,height:1.15*i.height})}}else p(m.At({receiptsAPI:h.commentReceipts,thread:t,viewport:a,config:x,navigate:g}));l(!0)}}},[t,h,a,p,e,s,d,r,x,g]),d}function A(e,t){let n=(0,o.d4)(e=>e.comments.newComment),s=(0,o.wA)(),l=(0,_.I_)().writeAPI,p=(0,y.s)();return i.useCallback(()=>{if(!l)return void console.error("Calling submitNewComment with no write API");let i=(0,a.g)();d.sn.start(`comment_creation_${i}`),(0,r.sx)("New comment Creating UUID",{uuid:i});let o=n.anchorPosition;if(!o)return;let h=e.getCommentDestinationForCanvasPosition(o,t,!0);h&&((0,r.sx)("New comment dispatching submission",{uuid:i}),s(m._B({destination:h,commentsWriteApi:l,commentsConfiguration:p,uuid:i})))},[e,n,s,t,l,p])}},729276(e,t,n){n.d(t,{d:()=>d});var i=n(105652),o=n(706354),s=n(843489),a=n(462198);function r(e){let t=null;for(let n of["em-emoji-picker","emoji-picker","[data-emoji-picker]"])if(t=e.current?.querySelector(n)||null)break;return(t||(t=Array.from(e.current?.children||[]).find(e=>e.shadowRoot)||null),t)?t.shadowRoot?.querySelector('input[type="search"]'):null}function d(e,t=!0){let n=i.useCallback(()=>{let t=r(e);return!!t&&(t.focus(),!0)},[e]);(0,s.h)(()=>{if(!t)return;let i=setTimeout(()=>{n()},50),s=setTimeout(()=>{let t=r(e);document.activeElement!==t&&(n()||(0,a.$D)(o.FigmaTeam.FIGJAM,Error("Emoji picker input not ready & focused after 150ms of opening"),void 0,!0))},150);return()=>{clearTimeout(i),clearTimeout(s)}})}},570175(e,t,n){n.d(t,{NS:()=>l,Cs:()=>p});var i=n(239976),o=n(105652);n(594293),n(850159);var s=n(224542),a=n.n(s),r=n(576581),d=n(944598);let l=122;function p(e){let[t,n]=o.useState(!1),s=(0,r.am)();o.useEffect(()=>{s("comments_suggestions_picker_opened")},[s]);let l=(0,d.f6)(e),p=e.typeahead.suggestedComments.map((o,a)=>{let r=()=>{e.setTypeahead({...e.typeahead,index:a})};return(0,i.jsx)(d.Hn,{className:"suggestions_picker--suggestionPillsOneLine--eSBF-",selectedClassName:"suggestions_picker--suggestionPillsSelected--FEJHK",selected:e.typeahead.index===a,onPointerOver:()=>{t&&r()},onPointerDown:()=>{n(!0),r()},onClick:()=>{s("comments_suggestions_picker_selected_item",{commentSuggestion:o.suggestionsKey,commentSuggestionIndex:a+1}),e.onInsert()},children:o.suggestionDisplay},`commentSuggestion ${o.suggestionDisplay}`)});return(0,i.jsx)(d.xD,{dispatchTypeahead:e.setTypeahead,typeahead:e.typeahead,className:a()({"suggestions_picker--suggestionPillsContainer--FyARS":!1,"suggestions_picker--suggestionPillsOneLineContainer--MfzJK suggestions_picker--suggestionPillsContainer--FyARS":!0,"suggestions_picker--suggestionPillsDown--3bdZw":e.direction===d.ri.DOWNWARDS,"suggestions_picker--suggestionPillsUp--QX1KW":e.direction===d.ri.UPWARDS}),onPointerMove:()=>n(!0),onInsert:e.onInsert,onClear:e.onClear,isOneLineOfSuggestions:!0,trackEvent:s,...l,children:p})}},842285(e,t,n){n.d(t,{C:()=>l,e:()=>p});var i=n(239976),o=n(850159),s=n(224542),a=n.n(s),r=n(513486),d=n(682950);let l=(0,r.kf)("lazy_thread_comment_composer",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e("7205"),n.e("7945"),n.e("8783"),n.e("6155"),n.e("8991"),n.e("1904"),n.e("907"),n.e("5463")]).then(n.bind(n,330674))).ThreadCommentComposer})});function p(e){let{type:t}=e;return(0,i.jsx)("div",{className:a()({[d.Gm]:"new"===t,[d.bQ]:"thread"===t}),children:(0,i.jsx)("span",{children:(0,o.tx)("comments.failed_to_load")})})}},388801(e,t,n){n.d(t,{VX:()=>l,i:()=>d});var i=n(350923);let{useRegisterMenu:o,open:s,close:a,isOpenAtom:r}=(0,n(108370).K)(),d=()=>(0,i.fp)(r)[0],l=2036!=n.j?o:null},783127(e,t,n){n.d(t,{A:()=>h});var i=n(239976),o=n(105652),s=n(224542),a=n.n(s),r=n(318768),d=n(490753),l=n(865955),p=n(448775);let h=function(e){let t=r.il.getDefaultSkin(),[n,s]=o.useState(t?t-1:0),h=t=>{t+=1,p.Y5.triggerAction("set-default-emoji-skin-tone",{newEmojiSkinTone:t}),e.onInsert(),setTimeout(()=>{e.onClear()},50)},{forceCloseSkinToneSelector:m}=e,c=o.useCallback(()=>(m(),!0),[m]);(0,l.O1)(c,l.KD.EDITING_TEXT_FIELD);let u=t=>{let i=e.allSkinTones.length;t.keyCode===d.Uz.UP_ARROW||t.keyCode===d.Uz.LEFT_ARROW?(t.stopPropagation(),t.preventDefault(),s((n-1+i)%i)):t.keyCode===d.Uz.DOWN_ARROW||t.keyCode===d.Uz.RIGHT_ARROW?(t.stopPropagation(),t.preventDefault(),s((n+1)%i)):(t.keyCode===d.Uz.ENTER||t.keyCode===d.Uz.TAB)&&(t.stopPropagation(),t.preventDefault(),h(e.allSkinTones[n].skin))};return o.useEffect(()=>(window.addEventListener("keydown",u,{capture:!0}),()=>window.removeEventListener("keydown",u,{capture:!0}))),(0,i.jsx)("div",{role:"listbox",onKeyDown:u,className:"skin_tone_selector--skinToneSelect--x4gvG",tabIndex:0,children:e.allSkinTones.map((t,o)=>(0,i.jsx)("div",{role:"option",tabIndex:-1,onPointerUp:()=>h(o),onPointerEnter:()=>s(o),className:a()({"skin_tone_selector--emojiWrapper--vgi1o":!0,"skin_tone_selector--figJamEditorSkinToneEmojiSelected--VNkCQ":n===o&&!e.isComments&&e.isFigJam,"skin_tone_selector--skinToneEmojiSelected--D9iaD":n===o&&(e.isComments||!e.isFigJam)}),"aria-selected":n===o,children:(0,i.jsx)("img",{className:"skin_tone_selector--skinToneEmojiPreview--dx3Ru",src:t.src,alt:""},t.src)},`${t.emojiName}-${t.skin}`))})}},329611(e,t,n){n.d(t,{p:()=>i});let i=(0,n(350923).eU)("")},741204(e,t,n){n.d(t,{E:()=>N});var i=n(239976),o=n(189331),s=n(850159),a=n(350923),r=n(865520),d=n(224542),l=n.n(d),p=n(295815),h=n(412427),m=n(67892),c=n(441242),u=n(435626),_=n(554904),y=n(2727),x=n(328151),g=n(694151),f=n(944598),w=n(319397),v=n(329611);let T="mentions_typeahead--mentionsTypeahead--jQfrZ",C="mentions_typeahead--communityMentionsTypeahead---XBDd mentions_typeahead--mentionsTypeahead--jQfrZ",k="mentions_typeahead--commentsMentionsTypeaheadDown--o6Fw6",P="mentions_typeahead--commentsMentionsTypeaheadUp--FspX1",j="mentions_typeahead--mentionsTypeaheadHeader--QIDz0",D="mentions_typeahead--name--2DARN mentions_typeahead--profileItem--izHYu",R=(0,p.jz)("132px")+8;function N(e){let t=(0,a.Xr)(v.p);return(0,i.jsx)(b,{...e,setMentionIdAtom:t,isUI3:!0})}class b extends r.uA{constructor(e){super(e),this.pointerMoved=!1,this.onMentionTypeaheadClick=e=>{this.props.onInsert(),this.props.setTypeahead(null),"profile_handle"in this.props.typeahead.mentions[e]&&this.props.dispatch((0,c.Hx)(this.props.typeahead.mentions[e]))},this.placeMention=e=>{this.props.setTypeahead({...this.props.typeahead,index:e})},this.generateTypeaheadItems=(e,t=0)=>{let n=e=>{let t="handle"in e?e.handle:null,n=null;if((0,y.d)(e))n=(0,i.jsx)("div",{className:D,children:e.name});else if(this.props.entity.id===e.id){let o=t??e.name;n=(0,i.jsx)("div",{className:D,children:(0,s.tx)("comments.name_and_you",{name:o||""})})}else n="email"in e?(0,i.jsx)(w._,{className:D,email:e.email||null,displayString:e.handle}):(0,i.jsx)("div",{className:D,children:e.name||t||""});return n};return e.map((e,o)=>{if((0,y.d)(e)&&!this.props.userGroupsEnabledForPlan)return null;let a=()=>{this.onMentionTypeaheadClick(o+t)},d=()=>{this.pointerMoved&&this.placeMention(o+t)},l=()=>{this.pointerMoved=!0,this.placeMention(o+t)},p=n(e),c=(0,y.d)(e)?(0,s.t)("user_groups.num_people_no_parentheses",{num:e.member_count}):"profile_handle"in e?`@${e.profile_handle}`:e.id.startsWith("invite-")?(0,s.t)("comments.invited"):e.email,u=(0,y.d)(e)?(0,i.jsx)(m.q,{size:h.Pf.MEDIUM30,userGroup:e}):(0,i.jsx)(g.Ro,{entity:e}),w=this.props.getAdditionalMetadata?.(e),v=this.props.typeahead.index===o+t,T=(e=>{if(!(0,y.d)(e))return;let t=(0,_.yE)(e.preview_members,e.member_count);if(t)return{"data-tooltip-type":x.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":220}})(e);return(0,i.jsxs)(f.Hn,{__tempScreenReaderFixAriaSelected:!0,className:this.props.isCommunityMentions?"mentions_typeahead--communityMentionsTypeaheadRow--yD7GZ mentions_typeahead--mentionsTypeaheadRow--1PcWA text--fontPos12--oWc5z text--_fontBase--VaHfk":"mentions_typeahead--mentionsTypeaheadRow--1PcWA",id:e.id,onClick:a,onPointerDown:l,onPointerOver:d,recordingKey:r.Pt(this.props.recordingKey,o+t,"item"),selected:v,selectedClassName:this.props.isCommunityMentions?"mentions_typeahead--communityMentionsTypeaheadRowSelected--ioO1U":"mentions_typeahead--mentionsTypeaheadRowSelected--GS8ij",children:[(0,i.jsx)("div",{className:"mentions_typeahead--avatar--1Bs7E",children:u}),(0,i.jsxs)("div",{className:"mentions_typeahead--profile--RggNo",children:[p,(0,i.jsxs)("div",{className:"mentions_typeahead--metadata--uf4x- mentions_typeahead--profileItem--izHYu","data-testid":"mention-typeahead-metadata",children:[!!c&&(0,i.jsx)("span",{className:"mentions_typeahead--email--FUrH4",...T,children:c}),!!w&&(0,i.jsxs)("span",{className:"mentions_typeahead--additionalMetadata--yiQaa",children:[c?" \u2022 ":"",w]})]})]})]},e.id)}).filter(Boolean)},this.setMaxTypeaheadHeight()}setMaxTypeaheadHeight(){this.props.setMaxTypeaheadHeight&&(this.props.isCommunityMentions?this.props.setMaxTypeaheadHeight((0,p.jz)("216px")):this.props.setMaxTypeaheadHeight(this.props.typeahead.maxMentions*(0,p.jz)("48px")))}componentDidUpdate(e){e.typeahead.mentions!==this.props.typeahead.mentions&&(this.pointerMoved=!1),(this.props.setMaxTypeaheadHeight!==e.setMaxTypeaheadHeight||this.props.typeahead.maxMentions!==e.typeahead.maxMentions||this.props.isCommunityMentions!==e.isCommunityMentions)&&this.setMaxTypeaheadHeight(),this.props.typeahead.index!==e.typeahead.index&&this.props.setMentionIdAtom(this.props.typeahead.mentions[this.props.typeahead.index]?.id??"")}render(){let e=()=>this.pointerMoved=!0,t=(0,f.f6)(this.props);if(this.props.typeahead.mentions.some(e=>e.id.startsWith("invite-"))){let n=this.props.typeahead.mentions.filter(e=>e.id.startsWith("invite-")),o=this.generateTypeaheadItems(n),a=this.props.typeahead.mentions.filter(e=>!e.id.startsWith("invite-")),r=this.generateTypeaheadItems(a,o.length),d=(0,i.jsx)("div",{className:j,style:{padding:6},children:(0,s.tx)("comments.invited")},"mentions-typeahead-top-padding-div"),p=(0,i.jsx)("div",{className:j,style:{padding:6},children:(0,s.tx)("comments.with_access")},"mentions-typeahead-bottom-padding-div"),h=[];return o.length>0&&(h.push(d),h.push(...o)),r.length>0&&(h.push(p),h.push(...r)),(0,i.jsxs)(f.xD,{className:l()({[C]:this.props.isCommunityMentions,[T]:!this.props.isCommunityMentions,[k]:this.props.isComments&&this.props.direction===f.ri.DOWNWARDS,[P]:this.props.isComments&&this.props.direction===f.ri.UPWARDS}),dataTestId:this.props.dataTestId,dispatchTypeahead:this.props.setTypeahead,id:u.Qd,onClear:this.props.onClear,onInsert:this.props.onInsert,onPointerMove:e,typeahead:this.props.typeahead,width:this.props.width,zIndex:this.props.zIndex,...t,children:[...h]})}{let n=this.generateTypeaheadItems(this.props.typeahead.mentions),a=(0,i.jsx)("div",{style:{height:6}},"mentions-typeahead-top-padding-div"),r=(0,i.jsx)("div",{style:{height:6}},"mentions-typeahead-bottom-padding-div"),d=this.props.isUI3?[...n]:[a,...n,r];if(this.props.typeahead.search&&this.props.typeahead.search.length>0){let e=(0,i.jsxs)("span",{style:{maxWidth:this.props.width-R},className:"mentions_typeahead--noMatchesFoundSearchTerm--IQc1s",children:[(0,s.tx)("comments.at_mention"),this.props.typeahead.search]}),t=(0,i.jsx)(o.T,{role:"alert",children:(0,i.jsx)("div",{className:"mentions_typeahead--noMatchesFoundRow--Q8xt7",children:(0,i.jsx)("span",{className:"mentions_typeahead--noMatchesFoundText--79-HE text--fontPos12--oWc5z text--_fontBase--VaHfk",style:{maxWidth:this.props.width},children:(0,s.tx)("comments.no_users_matched_your_search",{searchQuery:e})})},"mentions-typeahead-no-matches-div")});d=this.props.isUI3?[t]:[a,t,r]}return(0,i.jsx)(f.xD,{ariaLabel:(0,s.t)("comments.at_mention_listbox_label"),className:l()({[C]:this.props.isCommunityMentions,[T]:!this.props.isCommunityMentions,[k]:this.props.isComments&&this.props.direction===f.ri.DOWNWARDS,[P]:this.props.isComments&&this.props.direction===f.ri.UPWARDS}),dataTestId:this.props.dataTestId,dispatchTypeahead:this.props.setTypeahead,id:u.Qd,onClear:this.props.onClear,onInsert:this.props.onInsert,onPointerMove:e,typeahead:this.props.typeahead,width:this.props.width,zIndex:this.props.zIndex,...t,children:d})}}}b.displayName="MentionsTypeaheadView"},944598(e,t,n){n.d(t,{xD:()=>m,ri:()=>h,Hn:()=>c,f6:()=>u});var i,o=n(239976),s=n(105652),a=n(63744),r=n(865520),d=n(224542),l=n.n(d),p=n(490753),h=((i=h||{}).UPWARDS="upwards",i.DOWNWARDS="downwards",i);class m extends r.o6{constructor(){super(...arguments),this.isPointerInTypeaheadView=!0,this.getPositionStyle=()=>{if(this.props.useFixedPosition){let e=this.props.targetRect.left;return"downwards"===this.props.direction?{top:this.props.targetRect.bottom,left:e}:this.props.useWindowAsViewport?{bottom:window.innerHeight-this.props.targetRect.top,left:e}:a.nt?{bottom:a.nt.getViewportBounds().height-this.props.targetRect.top,left:this.props.targetRect.left}:{top:this.props.targetRect.bottom,left:this.props.targetRect.left}}if("downwards"===this.props.direction){let{left:e,bottom:t}=this.props.targetRect;return{transform:`translate(${e}px, ${t}px)`,WebkitTransform:`translate(${e}px, ${t}px)`}}if("upwards"===this.props.direction){let{left:e,bottom:t}=this.props.positionFromBottom;return{left:e,bottom:t}}},this.handleKeyDown=r.C0(this,"keydown",e=>{if(this.props.shouldNotHandleKeyDown)return;let t=()=>e.ctrlKey||e.altKey||e.shiftKey||e.metaKey,n=!0,i=this.props.typeahead,o=s.Children.count(this.props.children?.filter(e=>s.isValidElement(e)&&e.type===c)),a=null;if(e.keyCode!==p.Uz.DOWN_ARROW||t())if(e.keyCode!==p.Uz.UP_ARROW||t()){if((e.keyCode===p.Uz.DOWN_ARROW||e.keyCode===p.Uz.UP_ARROW)&&t())return void this.props.onClear()}else a="suggestions"===this.props.typeahead.type&&-1===i.index?o-1:(o+i.index-1)%o;else a=(i.index+1)%o;(e.keyCode===p.Uz.ENTER||e.keyCode===p.Uz.TAB)&&(e.stopPropagation(),e.preventDefault(),a=i.index,"suggestions"===i.type&&this.props.trackEvent&&this.props.trackEvent("comments_suggestions_picker_selected_item",{commentSuggestion:i.suggestedComments[i.index].suggestionsKey,commentSuggestionIndex:i.index+1}),this.props.onInsert(),this.props.shouldNotClearOnEnter&&(n=!1)),"suggestions"===this.props.typeahead.type&&this.props.isOneLineOfSuggestions&&!t()&&(e.keyCode===p.Uz.RIGHT_ARROW?a=(i.index+1)%o:e.keyCode===p.Uz.LEFT_ARROW&&(a=(o+i.index-1)%o)),null!==a&&this.props.dispatchTypeahead({...this.props.typeahead,index:a}),e.keyCode===p.Uz.ESCAPE||"suggestions"!==this.props.typeahead.type&&(e.keyCode===p.Uz.TAB||e.keyCode===p.Uz.ENTER||e.keyCode===p.Uz.LEFT_ARROW||e.keyCode===p.Uz.RIGHT_ARROW)?setTimeout(()=>{n&&this.props.onClear()},50):"suggestions"===this.props.typeahead.type&&(e.keyCode===p.Uz.ENTER||e.keyCode===p.Uz.TAB)&&this.props.dispatchTypeahead(null)}),this.handlePointerUp=r.Am(this,"pointerup",()=>{this.holdTimeout&&(clearTimeout(this.holdTimeout),this.props.setIsPointerDownInTypeahead?.(!1),this.isPointerInTypeaheadView||this.props.setWasPointerDownInTypeahead?.(!1))}),this.handlePointerDown=r.Am(this,"pointerdown",e=>{e.stopPropagation(),e.preventDefault(),this.holdTimeout=window.setTimeout(()=>{this.props.setIsPointerDownInTypeahead?.(!0),this.props.setWasPointerDownInTypeahead?.(!0)},500)}),this.handlePointerEnter=()=>this.isPointerInTypeaheadView=!0,this.handlePointerLeave=()=>this.isPointerInTypeaheadView=!1,this.pointerUpHandler=()=>{this.isPointerInTypeaheadView||this.props.setWasPointerDownInTypeahead?.(!1)}}componentDidMount(){super.componentDidMount(),window.addEventListener("keydown",this.handleKeyDown,{capture:!0}),window.addEventListener("pointerup",this.pointerUpHandler)}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("keydown",this.handleKeyDown,{capture:!0}),window.removeEventListener("pointerup",this.pointerUpHandler)}render(){let e=(0,o.jsx)("div",{"aria-label":this.props.ariaLabel,className:l()("typeahead--typeahead--nsWf-",this.props.className,"downwards"===this.props.direction&&"typeahead--openDownwards--GsmZM"),"data-testid":this.props.dataTestId,id:this.props.id,onKeyDown:this.handleKeyDown,onPointerDown:this.handlePointerDown,onPointerEnter:this.handlePointerEnter,onPointerLeave:this.handlePointerLeave,onPointerMove:this.props.onPointerMove,onPointerUp:this.handlePointerUp,role:"listbox",style:{...this.getPositionStyle(),width:this.props.width,zIndex:this.props.zIndex},tabIndex:-1,children:this.props.children});return this.props.useFixedPosition?(0,o.jsx)("div",{className:"typeahead--fixedTypeaheadContainer--GknNB",children:e}):e}}m.displayName="TypeaheadView";class c extends r.uA{constructor(){super(...arguments),this.containerRef=s.createRef(),this.handlePointerDown=r.Am(this,"pointerdown",e=>this.props.onPointerDown()),this.handlePointerUp=r.Am(this,"pointerup",()=>this.props.onClick())}componentDidUpdate(e,t){super.componentDidUpdate(e,t),!e.selected&&this.props.selected&&this.containerRef.current?.scrollIntoView({block:"nearest"})}render(){let e=this.props.className;this.props.selected&&(e+=" "+this.props.selectedClassName);let t=this.props.__tempScreenReaderFixAriaSelected?void 0:this.props.selected;return(0,o.jsx)("div",{role:"option",tabIndex:-1,"aria-selected":t,className:e,onPointerDown:this.handlePointerDown,onPointerUp:this.handlePointerUp,onPointerOver:this.props.onPointerOver,ref:this.containerRef,id:this.props.id,children:this.props.children})}}function u(e){return{...e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:e.direction}:"downwards"===e.direction?{targetRect:e.targetRect,direction:"downwards"}:{positionFromBottom:e.positionFromBottom,direction:"upwards"},useWindowAsViewport:e.useWindowAsViewport}}c.displayName="TypeaheadItem"},445588(e,t,n){n.d(t,{J:()=>a});var i=n(350923),o=n(351823);let s={messageIndex:-1,fileSequenceNumber:0,chatMessageId:"",versionName:null,sourceCodeHash:"",versionId:null},a=(0,o.Wh)(()=>(0,i.eU)(s))},610452(e,t,n){n.d(t,{A:()=>s});var i=n(105652),o=n(239976);let s=(0,i.memo)(function(e){return(0,o.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,"data-fpl-icon-size":"24",children:(0,o.jsx)("path",{fill:"var(--fpl-icon-color, var(--color-icon))",d:"M12 5a7 7 0 1 1 0 14 7 7 0 0 1 0-14m0 1a6 6 0 1 0 0 12 6 6 0 0 0 0-12m-3.18 7a.56.56 0 0 1 .492.325 2.996 2.996 0 0 0 5.377 0 .56.56 0 0 1 .49-.325h.05c.327 0 .566.31.434.61a4.001 4.001 0 0 1-7.326 0c-.132-.3.108-.61.434-.61zM10 10a1 1 0 1 1 0 2 1 1 0 0 1 0-2m4 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})})})}}]);

//# debugId=afc50fdf-415a-5065-a499-6bcefbd500b9

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/63813a8eab77a72700f77646edf61d22d438075c/1904-72b2bf455f7fef9b.min.js.map